(window.webpackJsonpworm=window.webpackJsonpworm||[]).push([[0],{10:function(t,e,i){t.exports=i(18)},15:function(t,e,i){},16:function(t,e,i){},18:function(t,e,i){"use strict";i.r(e);var n,s=i(0),o=i.n(s),a=i(6),r=i.n(a),c=(i(15),i(16),i(1)),h=i.n(c),u=i(3),l=i(4),d=i(2),v=i(8),p=i(7),f=i(9),k=function(t){function e(t){var i;return Object(l.a)(this,e),(i=Object(v.a)(this,Object(p.a)(e).call(this,t))).canvasRef=void 0,i.canvasRef=o.a.createRef(),i.state={tick:0},i}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this.canvasRef.current.getContext("2d");t.fillStyle="green";var e=new S(t,this.props.canvasSize,5,100,100);e.start(!0),window.addEventListener("keydown",function(t){return e.handleKey(t.keyCode)})}},{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.canvasRef,width:this.props.canvasSize.width,height:this.props.canvasSize.height,style:{border:"1px solid"}})}}]),e}(o.a.Component),w=function(t,e){return t.posX===e.posX&&t.posY===e.posY};!function(t){t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.SPACE=32]="SPACE"}(n||(n={}));var b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posX:0,posY:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.DOWN;Object(l.a)(this,t),this.size=i,this.direction=s,this._headPosition={posX:0,posY:0},this.body=[],this.headPosition=e,this.body.push(this.headPosition)}return Object(d.a)(t,[{key:"headPosition",get:function(){return this._headPosition},set:function(t){this.body.length>=this.size&&this.body.shift(),this.body.push(t),this._headPosition=t}}]),t}(),S=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;Object(l.a)(this,t),this.ctx=e,this.canvasSizeinPx=i,this.blockSize=n,this.intervalId=void 0,this.tick=0,this.fps=50,this.snacks=[],this.worms=[],this.step=1;for(var a=0;a<s;a++)this.worms.push(new b);this.initSnacks(o)}return Object(d.a)(t,[{key:"canvasSizeInBlocks",get:function(){return{width:this.canvasSizeinPx.width/this.blockSize,height:this.canvasSizeinPx.height/this.blockSize}}}]),Object(d.a)(t,[{key:"initSnacks",value:function(){var t=Object(u.a)(h.a.mark(function t(e){var i;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e)){t.next=10;break}return t.t0=this.snacks,t.next=5,this.setSnackPosition();case 5:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 7:i++,t.next=1;break;case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"setSnackPosition",value:function(){var t=Object(u.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e={posX:Math.floor(Math.random()*this.canvasSizeInBlocks.width),posY:Math.floor(Math.random()*this.canvasSizeInBlocks.height)};this.worms.some(function(t){return t.body.some(function(t){return w(t,e)})});)e={posX:Math.floor(Math.random()*this.canvasSizeInBlocks.width),posY:Math.floor(Math.random()*this.canvasSizeInBlocks.height)};return t.abrupt("return",e);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalId=setInterval(function(){t.run(e)},1e3/this.fps)}},{key:"stop",value:function(){this.intervalId&&clearInterval(this.intervalId)}},{key:"run",value:function(t){this.tick++;for(var e=0;e<this.worms.length;e++){var i=this.worms[e];if(this.move(i),t){var s=n.LEFT+Math.floor(4*Math.random());this.changeDirection(s,i)}}this.draw()}},{key:"checkSnack",value:function(){var t=Object(u.a)(h.a.mark(function t(e,i){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!w(this.snacks[i],e.headPosition)){t.next=6;break}return e.size++,t.next=5,this.setSnackPosition();case 5:this.snacks[i]=t.sent;case 6:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}()},{key:"move",value:function(t){var e=this.moveTowards(t.direction,t),i=this.checkMove(e);if(i){for(var n=0;n<this.snacks.length;n++)this.checkSnack(t,n);return t.headPosition=e,i}return i}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvasSizeinPx.width,this.canvasSizeinPx.height);for(var t=0;t<this.worms.length;t++)for(var e=this.worms[t],i=0;i<e.body.length;i++){var n=e.body[i];this.ctx.fillStyle="black",this.ctx.fillRect(n.posX*this.blockSize,n.posY*this.blockSize,this.blockSize,this.blockSize)}for(var s=0;s<this.snacks.length;s++){var o=this.snacks[s];this.ctx.fillStyle="green",this.ctx.fillRect(o.posX*this.blockSize,o.posY*this.blockSize,this.blockSize,this.blockSize)}}},{key:"handleKey",value:function(t){Object.values(n).includes(t)&&(this.changeDirection(t,this.worms[0]),t===n.SPACE&&this.worms[0].size++)}},{key:"changeDirection",value:function(t,e){e.direction===n.DOWN&&t===n.UP||e.direction===n.UP&&t===n.DOWN||e.direction===n.LEFT&&t===n.RIGHT||e.direction===n.RIGHT&&t===n.LEFT||(e.direction=t)}},{key:"moveTowards",value:function(t,e){switch(t){case n.UP:return{posY:e.headPosition.posY-this.step,posX:e.headPosition.posX};case n.DOWN:return{posY:e.headPosition.posY+this.step,posX:e.headPosition.posX};case n.LEFT:return{posY:e.headPosition.posY,posX:e.headPosition.posX-this.step};case n.RIGHT:return{posY:e.headPosition.posY,posX:e.headPosition.posX+this.step};default:return console.log("no action assigned"),e.headPosition}}},{key:"checkMove",value:function(t){return!(this.canvasSizeInBlocks.height<t.posY+this.step||t.posY<0||this.canvasSizeInBlocks.width<t.posX+this.step||t.posX<0)}}]),t}(),m=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k,{canvasSize:{width:500,height:800}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.3e3813bf.chunk.js.map